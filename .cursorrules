# Astro 站群项目开发规范

## 项目基本信息
- 项目类型: Astro SSG 站群项目
- 包管理器: pnpm
- TypeScript: 启用严格模式
- 构建工具: Astro 内置构建 + 自定义站群构建脚本

## 站群架构设计

### 核心理念
- 一个代码库，多个独立站点
- 每个站点独立域名，独立SEO
- 共享组件和工具类，独立配置
- 静态生成，高性能部署

### 目录结构
```
src/
├── pages/              # 页面路由文件
│   ├── base64-image/     
│       ├── index.astro   # Base64转图片站点
│   ├── base64-pdf/       
│       ├── index.astro   # Base64转PDF站点
├── layouts/            # 布局组件
│   ├── BaseLayout.astro    # 基础布局
│   └── ToolLayout.astro    # 工具页面布局
├── components/         # UI组件
│   ├── common/         # 通用组件
│   └── tools/          # 工具组件
├── utils/              # 工具函数
│   └── base64.ts       # Base64处理工具
└── styles/             # 样式文件
configs/                # 配置文件
├── sites.json          # 站点配置
└── domains.json        # 域名配置
scripts/                # 构建脚本
├── build-sites.js      # 站群构建脚本
├── deploy.js           # 部署脚本
└── generate-configs.js # 配置生成脚本
```

## 站群构建规范

### 配置文件规范
1. **sites.json**: 站点配置文件
   - 每个站点必须有唯一的id
   - 包含name、description、domain、keywords等信息
   - 支持自定义主题色和图标

2. **构建脚本**: scripts/build-sites.js
   - 读取站点配置
   - 为每个站点生成独立的Astro配置
   - 执行构建并输出到对应目录
   - 自动生成SEO文件（sitemap.xml、robots.txt、manifest.json）

### 构建命令
- `pnpm build:sites` - 构建所有站点
- `pnpm build:single` - 构建单个站点
- `pnpm dev` - 开发模式

## 代码规范

### Astro组件规范
1. **布局组件**
   - 使用ToolLayout作为工具页面的基础布局
   - 支持动态SEO配置
   - 集成主题切换功能

2. **工具组件**
   - 放置在components/tools/目录
   - 使用TypeScript编写交互逻辑
   - 支持文件上传和进度显示

3. **页面组件**
   - 每个站点对应一个页面目录
   - 使用布局组件包装工具组件
   - 保持简洁的页面结构

### TypeScript规范
- 启用严格类型检查
- 为工具函数定义完整的类型
- 使用接口定义配置结构
- 全局类型声明放在对应文件顶部

### 样式规范
- 使用CSS变量实现主题切换
- 响应式设计，支持移动端
- 组件样式使用scoped CSS
- 统一的设计系统和颜色规范

## 工具开发规范

### Base64工具类
- 统一的工具类：Base64Utils
- 支持文本和文件编码/解码
- 错误处理和进度回调
- 文件大小限制和格式验证

### 组件交互规范
- 使用防抖和节流优化性能
- 提供用户友好的错误提示
- 支持拖拽上传和剪贴板操作
- 实时显示处理进度

### 功能特性
- 本地处理，数据不上传
- 支持大文件分块处理
- 一键复制和下载功能
- 详细的统计信息显示

## SEO优化规范

### 页面优化
- 每个站点独立的title和meta标签
- 结构化数据标记（JSON-LD）
- Open Graph和Twitter Card支持
- 自动生成sitemap和robots.txt

### 性能优化
- 静态生成，零运行时JavaScript（可选）
- 图片优化和懒加载
- CSS代码分割和预加载
- 服务端渲染SEO内容

### 用户体验
- 响应式设计，移动端友好
- 暗色模式支持
- 快速的页面加载速度
- 直观的操作界面
