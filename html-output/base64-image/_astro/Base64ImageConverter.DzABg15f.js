import{r as de,a as l}from"./index._OACqPSs.js";var L={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q;function ce(){if(q)return T;q=1;var r=de(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(x,d,p){var u,b={},v=null,y=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(y=d.ref);for(u in d)a.call(d,u)&&!c.hasOwnProperty(u)&&(b[u]=d[u]);if(x&&x.defaultProps)for(u in d=x.defaultProps,d)b[u]===void 0&&(b[u]=d[u]);return{$$typeof:t,type:x,key:v,ref:y,props:b,_owner:n.current}}return T.Fragment=i,T.jsx=h,T.jsxs=h,T}var J;function ge(){return J||(J=1,L.exports=ce()),L.exports}var e=ge();class ue{worker=null;tasks=new Map;isReady=!1;initPromise=null;isClient=!1;constructor(){this.isClient=typeof window<"u"&&typeof Worker<"u",this.isClient&&this.initWorker()}async initWorker(){if(!this.isClient)throw new Error("Worker is not available in this environment");return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,i)=>{try{this.worker=new Worker("./base64-worker.js"),this.worker.onmessage=a=>{const{type:n,id:c,result:h,error:x,progress:d,message:p}=a.data;switch(n){case"ready":this.isReady=!0,t();break;case"result":this.handleResult(c,h);break;case"error":this.handleError(c,x);break;case"progress":this.handleProgress(c,d,p);break;default:console.warn("Unknown worker message type:",n)}},this.worker.onerror=a=>{console.error("Worker error:",a),i(new Error("Worker initialization failed"))}}catch(a){i(a)}}),this.initPromise)}handleResult(t,i){const a=this.tasks.get(t);a&&(this.tasks.delete(t),a.resolve(i))}handleError(t,i){const a=this.tasks.get(t);a&&(this.tasks.delete(t),a.reject(new Error(i)))}handleProgress(t,i,a){const n=this.tasks.get(t);n&&n.onProgress&&n.onProgress(i,a)}generateTaskId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}async ensureWorkerReady(){if(!this.isClient)throw new Error("Worker is not available in this environment");this.isReady||await this.initWorker()}async base64ToBlob(t,i){return this.isClient?(await this.ensureWorkerReady(),new Promise((a,n)=>{const c=this.generateTaskId();this.tasks.set(c,{id:c,type:"base64ToBlob",resolve:a,reject:n,onProgress:i}),this.worker.postMessage({type:"base64ToBlob",id:c,data:{base64:t}})})):{success:!1,error:"Worker not available in this environment"}}async fileToBase64(t,i){return this.isClient?(await this.ensureWorkerReady(),new Promise((a,n)=>{const c=this.generateTaskId();this.tasks.set(c,{id:c,type:"fileToBase64",resolve:a,reject:n,onProgress:i}),this.worker.postMessage({type:"fileToBase64",id:c,data:{file:t}})})):{success:!1,error:"Worker not available in this environment"}}async validateBase64Image(t){return this.isClient?(await this.ensureWorkerReady(),new Promise((i,a)=>{const n=this.generateTaskId();this.tasks.set(n,{id:n,type:"validateBase64",resolve:i,reject:a}),this.worker.postMessage({type:"validateBase64",id:n,data:{base64:t}})})):{success:!1,error:"Worker not available in this environment"}}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.tasks.clear(),this.isReady=!1,this.initPromise=null}}const M=new ue,he=(r,t)=>{const[i,a]=l.useState(r);return l.useEffect(()=>{const n=setTimeout(()=>{a(r)},t);return()=>{clearTimeout(n)}},[r,t]),i};class me{translations=null;isClient=!1;fallbackTranslations=null;isReady=!1;readyCallbacks=[];constructor(){this.fallbackTranslations={converter:{tabs:{decode:"Base64 to Image",encode:"Image to Base64"},actions:{paste:"Paste Base64 encoding here...",decode:"Convert to Image",clear:"Clear",copy:"Copy",downloadImage:"Download Image",downloadTxt:"Download as TXT"},labels:{dropzone:"Drag and drop image here, or click to select file",resultTitle:"Conversion Result",outputTitle:"Base64 Output",loading:"Processing...",imageInfoTitle:"Image Information"},textStats:{length:"Length",size:"Size",largeTextWarning:"Large text detected, processing may take some time"},messages:{errorPaste:"Please enter Base64 encoding",errorInvalid:"Please enter a valid image Base64 encoding",success:"Conversion successful!",errorFail:"Conversion failed: ",errorSelect:"Please select an image file",errorSize:"File size cannot exceed 10MB",errorUnknown:"Conversion failed",imageDownloaded:"Image downloaded",copied:"Base64 encoding copied to clipboard",copyFail:"Copy failed, please select and copy manually",textDownloaded:"Base64 file downloaded",cleared:"Cleared all results",processing:"Processing text...",textProcessed:"Text processed successfully"},imageInfo:{name:"Name",size:"Size",type:"Type"}}}}init(){typeof window<"u"?(this.isClient=!0,window.translations?(this.translations=window.translations,this.isReady=!0,this.notifyReady()):setTimeout(()=>{window.translations?(this.translations=window.translations,this.isReady=!0,this.notifyReady()):setTimeout(()=>{window.translations||(this.translations=this.fallbackTranslations,this.isReady=!0,this.notifyReady())},100)},0)):(this.translations=this.fallbackTranslations,this.isReady=!0)}notifyReady(){this.readyCallbacks.forEach(t=>t()),this.readyCallbacks=[]}onReady(t){this.isReady?t():this.readyCallbacks.push(t)}t(t){if(!this.translations)return t;const i=t.split(".");let a=this.translations;for(const n of i)if(a&&typeof a=="object"&&n in a)a=a[n];else return t;return typeof a=="string"?a:t}isClientSide(){return this.isClient}}const C=new me,be=()=>{const[r,t]=l.useState(!1);return l.useEffect(()=>{C.init(),C.onReady(()=>{t(!0)})},[]),{t:C.t.bind(C),isReady:r,isClient:C.isClientSide()}};function fe(){const{t:r,isClient:t}=be(),[i,a]=l.useState("decode"),[n,c]=l.useState(""),[h,x]=l.useState(""),[d,p]=l.useState(""),[u,b]=l.useState(!1),[v,y]=l.useState(!1),[N,O]=l.useState(null),[R,_]=l.useState({show:!1,progress:0,message:""}),[m,I]=l.useState(null),[P,B]=l.useState(!1),[w,K]=l.useState(null),E=l.useRef(null),z=l.useRef(null),V=l.useRef(null),A=he(n,300),W=l.useMemo(()=>{if(!n)return null;const s=n.length,o=Math.round(s*.75/1024*100)/100,f=s>5e4;return{length:s,sizeKB:o,isLarge:f}},[A]);l.useEffect(()=>{K(W)},[W]),l.useEffect(()=>()=>{M.destroy()},[]);const g=(s,o="info")=>{O({message:s,type:o}),setTimeout(()=>O(null),3e3)},D=(s,o)=>{_({show:!0,progress:Math.min(100,Math.max(0,s)),message:o})},S=()=>{_({show:!1,progress:0,message:""})},F=()=>{if(z.current){const f=z.current.getBoundingClientRect().top+window.pageYOffset+-80;window.scrollTo({top:f,behavior:"smooth"})}},H=l.useCallback(s=>{const o=s.target.value;o.length>5e4?(B(!0),setTimeout(()=>{c(o),B(!1)},0)):c(o)},[]),X=l.useCallback(s=>{const o=s.clipboardData.getData("text");o.length>1e5&&(s.preventDefault(),B(!0),g(r("converter.messages.processing"),"info"),(async()=>{try{let $="";for(let j=0;j<o.length;j+=5e4){const oe=o.slice(j,j+5e4);$+=oe,await new Promise(le=>setTimeout(le,10));const ne=Math.min(j+5e4,o.length),ie=Math.round(ne/o.length*100);D(ie,r("converter.messages.processing"))}c($),S(),g(r("converter.messages.textProcessed"),"success")}catch{g(r("converter.messages.errorUnknown"),"error"),S()}finally{B(!1)}})())},[r]),Y=l.useCallback(async()=>{if(!n.trim()){g(r("converter.messages.errorPaste"),"error");return}b(!0),I(null);try{const s=await M.base64ToBlob(n,D);s.success&&s.url?(p(s.url),s.size&&I({name:"converted-image",size:`${s.size.size} ${s.size.unit}`,type:s.type||"image/*"}),g(r("converter.messages.success"),"success"),setTimeout(F,100)):g(r("converter.messages.errorFail"),"error")}catch(s){g(r("converter.messages.errorFail")+s.message,"error")}finally{b(!1),S()}},[n]),U=l.useCallback(async s=>{if(!s.type.startsWith("image/")){g(r("converter.messages.errorSelect"),"error");return}if(s.size>100*1024*1024){g("文件过大，请选择小于100MB的图片","error");return}b(!0),I(null);try{const o=await M.fileToBase64(s,D);o.success&&o.data?(x(o.data),o.sizeInfo&&I({name:s.name,size:`${o.sizeInfo.size} ${o.sizeInfo.unit}`,type:s.type}),g(r("converter.messages.success"),"success"),setTimeout(F,100)):g(o.error||r("converter.messages.errorUnknown"),"error")}catch(o){g(r("converter.messages.errorFail")+o.message,"error")}finally{b(!1),S()}},[]),G=s=>{const o=s.target.files?.[0];o&&U(o)},Q=s=>{s.preventDefault(),y(!0)},Z=s=>{s.preventDefault(),y(!1)},ee=s=>{s.preventDefault(),y(!1);const o=s.dataTransfer.files[0];o&&U(o)},te=()=>{if(d&&m){const s=document.createElement("a");s.href=d,s.download=m.name+".png",document.body.appendChild(s),s.click(),document.body.removeChild(s),g(r("converter.messages.imageDownloaded"),"success")}},se=async()=>{const s=i==="encode"?h:n;if(s)try{await navigator.clipboard.writeText(s),g(r("converter.messages.copied"),"success")}catch{g(r("converter.messages.copyFail"),"error")}},re=()=>{const s=i==="encode"?h:n;if(s){const o=new Blob([s],{type:"text/plain"}),f=URL.createObjectURL(o),k=document.createElement("a");k.href=f,k.download="base64-data.txt",document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(f),g(r("converter.messages.textDownloaded"),"success")}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4",ref:z,children:[e.jsx("style",{children:`
        [data-theme="dark"] .bg-white { background-color: rgb(31 41 55) !important; }
        [data-theme="dark"] .bg-gray-50 { background-color: rgb(55 65 81) !important; }
        [data-theme="dark"] .bg-gray-100 { background-color: rgb(55 65 81) !important; }
        [data-theme="dark"] .border-gray-200 { border-color: rgb(75 85 99) !important; }
        [data-theme="dark"] .border-gray-300 { border-color: rgb(75 85 99) !important; }
        [data-theme="dark"] .text-gray-900 { color: rgb(255 255 255) !important; }
        [data-theme="dark"] .text-gray-600 { color: rgb(156 163 175) !important; }
        [data-theme="dark"] .text-gray-700 { color: rgb(209 213 219) !important; }
        [data-theme="dark"] .hover\\:bg-gray-200:hover { background-color: rgb(75 85 99) !important; }
        [data-theme="dark"] .hover\\:border-gray-400:hover { border-color: rgb(107 114 128) !important; }
      `}),N&&e.jsx("div",{className:`
          fixed top-5 right-5 z-50 px-5 py-3 rounded-xl text-white font-medium text-sm
          shadow-2xl transition-all duration-300 ease-out
          ${N.type==="success"?"bg-green-500":N.type==="error"?"bg-red-500":"bg-blue-500"}
        `,children:N.message}),R.show&&e.jsxs("div",{className:"fixed top-5 left-1/2 transform -translate-x-1/2 z-50 bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 border border-gray-200 dark:border-gray-700",style:{width:"320px"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:R.message})]}),e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-2 w-full",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,Math.max(0,R.progress))}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-right",children:[Math.round(R.progress),"%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>a("decode"),className:`flex-1 p-4 text-lg font-semibold transition-colors duration-200 ${i==="decode"?"bg-blue-500 text-white":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t?r("converter.tabs.decode"):"Base64 to Image"}),e.jsx("button",{onClick:()=>a("encode"),className:`flex-1 p-4 text-lg font-semibold transition-colors duration-200 ${i==="encode"?"bg-blue-500 text-white":"bg-transparent text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t?r("converter.tabs.encode"):"Image to Base64"})]}),i==="decode"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:V,className:"w-full h-32 p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:t?r("converter.actions.paste"):"Paste Base64 encoding here...",value:n,onChange:H,onPaste:X,disabled:P}),P&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-800/80 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:t?r("converter.messages.processingText"):"处理大型文本中..."})]})})]}),w&&e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:[t?r("converter.stats.length"):"长度",": ",w.length.toLocaleString()," ",t?r("converter.stats.characters"):"字符"]}),e.jsxs("span",{children:[t?r("converter.stats.size"):"大小",": ~",w.sizeKB," KB"]}),w.isLarge&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded text-xs",children:t?r("converter.stats.largeText"):"大型文本"})]}),w.isLarge&&e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["💡 ",t?r("converter.stats.optimizedHint"):"提示：大型文本使用优化处理"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[e.jsx("button",{onClick:Y,disabled:u||P,className:"flex-1 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors duration-200",children:u?t?r("converter.labels.loading"):"Processing...":t?r("converter.actions.decode"):"Convert to Image"}),e.jsx("button",{onClick:te,disabled:!d,className:"flex-1 px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors duration-200",children:t?r("converter.actions.downloadImage"):"Download Image"})]})]}),i==="encode"&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{onDrop:ee,onDragOver:Q,onDragLeave:Z,onClick:()=>E.current?.click(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors duration-200
                ${v?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400"}`,children:[e.jsx("input",{type:"file",ref:E,onChange:G,className:"hidden",accept:"image/*"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t?r("converter.labels.dropzone"):"Drag and drop image here, or click to select file"}),m&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg p-2 inline-block",children:[e.jsxs("div",{children:["📁 ",m.name]}),e.jsxs("div",{children:["📊 ",m.size," • ",m.type]})]})]})]})}),(d||h)&&e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[d&&i==="decode"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:t?r("converter.labels.resultTitle"):"Conversion Result"}),m&&e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"font-medium",children:m.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-2 py-1 rounded text-xs",children:m.size}),e.jsx("span",{className:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 px-2 py-1 rounded text-xs",children:m.type})]})]})]}),e.jsx("div",{className:"p-3 border rounded-lg bg-white dark:bg-gray-700",children:e.jsx("img",{src:d,alt:"Converted from Base64",className:"max-w-full mx-auto rounded"})})]}),h&&i==="encode"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 dark:text-white",children:t?r("converter.labels.outputTitle"):"Base64 Output"}),e.jsx("div",{className:"mb-3",children:e.jsx("textarea",{readOnly:!0,value:h,className:"w-full h-24 p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:se,className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200 text-sm",children:t?r("converter.actions.copy"):"Copy"}),e.jsx("button",{onClick:re,className:"px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors duration-200 text-sm",children:t?r("converter.actions.downloadTxt"):"Download as TXT"})]})]})]})]})]})}export{fe as default};
