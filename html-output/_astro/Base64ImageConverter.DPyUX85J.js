import{r as $,a as x}from"./index._OACqPSs.js";var N={exports:{}},w={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _;function P(){if(_)return w;_=1;var p=$(),a=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function c(u,n,h){var i,m={},y=null,b=null;h!==void 0&&(y=""+h),n.key!==void 0&&(y=""+n.key),n.ref!==void 0&&(b=n.ref);for(i in n)o.call(n,i)&&!d.hasOwnProperty(i)&&(m[i]=n[i]);if(u&&u.defaultProps)for(i in n=u.defaultProps,n)m[i]===void 0&&(m[i]=n[i]);return{$$typeof:a,type:u,key:y,ref:b,props:m,_owner:s.current}}return w.Fragment=t,w.jsx=c,w.jsxs=c,w}var E;function Z(){return E||(E=1,N.exports=P()),N.exports}var e=Z();class R{static MAX_FILE_SIZE=10*1024*1024;static textToBase64(a){try{return btoa(unescape(encodeURIComponent(a)))}catch{throw new Error("文本转换失败")}}static base64ToText(a){try{return decodeURIComponent(escape(atob(a)))}catch{throw new Error("Base64解码失败")}}static async fileToBase64(a){try{return a.size>this.MAX_FILE_SIZE?{success:!1,error:`文件大小超过限制 (${this.formatFileSize(this.MAX_FILE_SIZE)})`}:{success:!0,data:await new Promise((o,s)=>{const d=new FileReader;d.onload=()=>{const c=d.result;o(c)},d.onerror=()=>s(new Error("文件读取失败")),d.readAsDataURL(a)}),size:a.size}}catch(t){return{success:!1,error:t instanceof Error?t.message:"转换失败"}}}static base64ToBlob(a,t){const o=atob(a.split(",")[1]||a),s=new Array(o.length);for(let c=0;c<o.length;c++)s[c]=o.charCodeAt(c);const d=new Uint8Array(s);return new Blob([d],{type:t||"image/png"})}static downloadBase64Image(a,t="image"){try{const o=a.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*$/),s=o?o[1]:"image/png",d=s.split("/")[1]||"png",c=this.base64ToBlob(a,s),u=URL.createObjectURL(c),n=document.createElement("a");n.href=u,n.download=`${t}.${d}`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(u)}catch{throw new Error("下载失败")}}static isValidBase64(a){try{const t=a.includes(",")?a.split(",")[1]:a;return!t||t.length===0||!/^[A-Za-z0-9+/]*={0,2}$/.test(t)||t.length%4!==0?!1:(atob(t),!0)}catch{return!1}}static getImageInfo(a){try{const t=a.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*$/);if(!t)return null;const s=t[1].split("/")[1]||"unknown",d=a.split(",")[1]||a;return{size:Math.round(d.length*3/4),type:s.toUpperCase(),width:void 0,height:void 0}}catch{return null}}static formatFileSize(a){if(a===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(a)/Math.log(t));return parseFloat((a/Math.pow(t,s)).toFixed(2))+" "+o[s]}static getImageDimensions(a){return new Promise((t,o)=>{const s=new Image;s.onload=()=>{t({width:s.naturalWidth,height:s.naturalHeight})},s.onerror=()=>{o(new Error("无法加载图片"))},s.src=a})}static compressImage(a,t=1920,o=1080,s=.8){return new Promise((d,c)=>{const u=new Image;u.onload=()=>{const n=document.createElement("canvas"),h=n.getContext("2d");if(!h){c(new Error("无法创建Canvas上下文"));return}let{width:i,height:m}=u;if(i>t||m>o){const b=Math.min(t/i,o/m);i*=b,m*=b}n.width=i,n.height=m,h.drawImage(u,0,0,i,m);const y=n.toDataURL("image/jpeg",s);d(y)},u.onerror=()=>{c(new Error("图片加载失败"))},u.src=a})}}function J(){const[p,a]=x.useState("decode"),[t,o]=x.useState(""),[s,d]=x.useState(""),[c,u]=x.useState(""),[n,h]=x.useState(null),[i,m]=x.useState(!1),[y,b]=x.useState(!1),[j,I]=x.useState(null),B=x.useRef(null),g=(r,l="info")=>{I({message:r,type:l}),setTimeout(()=>I(null),3e3)},T=r=>{if(r===0)return"0 Bytes";const l=1024,v=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(r)/Math.log(l));return parseFloat((r/Math.pow(l,f)).toFixed(2))+" "+v[f]},L=r=>{try{return!!r.includes("data:image/")}catch{return!1}},z=x.useCallback(async()=>{if(!t.trim()){g("请输入Base64编码","error");return}if(!L(t)){g("请输入有效的图片Base64编码","error");return}m(!0);try{const r=R.base64ToBlob(t),l=URL.createObjectURL(r);u(l);const v=R.getImageInfo(t);h(v),g("转换成功！","success")}catch(r){g("转换失败："+r.message,"error")}finally{m(!1)}},[t]),C=x.useCallback(async r=>{if(!r.type.startsWith("image/")){g("请选择图片文件","error");return}if(r.size>10*1024*1024){g("文件大小不能超过10MB","error");return}m(!0);try{const l=await R.fileToBase64(r);l.success&&l.data?(d(l.data),h({name:r.name,size:T(r.size),type:r.type}),g("转换成功！","success")):g(l.error||"转换失败","error")}catch(l){g("转换失败："+l.message,"error")}finally{m(!1)}},[]),U=r=>{const l=r.target.files?.[0];l&&C(l)},O=r=>{r.preventDefault(),b(!0)},S=r=>{r.preventDefault(),b(!1)},M=r=>{r.preventDefault(),b(!1);const l=r.dataTransfer.files[0];l&&C(l)},D=()=>{if(c){const r=document.createElement("a");r.href=c,r.download=n?.name||"converted-image.png",document.body.appendChild(r),r.click(),document.body.removeChild(r),g("图片已下载","success")}},A=async()=>{const r=p==="encode"?s:t;if(r)try{await navigator.clipboard.writeText(r),g("Base64编码已复制到剪贴板","success")}catch{g("复制失败，请手动选择复制","error")}},F=()=>{const r=p==="encode"?s:t;if(r){const l=new Blob([r],{type:"text/plain"}),v=URL.createObjectURL(l),f=document.createElement("a");f.href=v,f.download="base64-data.txt",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(v),g("Base64文件已下载","success")}},k=()=>{o(""),d(""),u(""),h(null),B.current&&(B.current.value=""),g("已清除所有结果","info")};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4",children:[e.jsx("style",{children:`
        [data-theme="dark"] .bg-white { background-color: rgb(31 41 55) !important; }
        [data-theme="dark"] .bg-gray-50 { background-color: rgb(55 65 81) !important; }
        [data-theme="dark"] .bg-gray-100 { background-color: rgb(55 65 81) !important; }
        [data-theme="dark"] .border-gray-200 { border-color: rgb(75 85 99) !important; }
        [data-theme="dark"] .border-gray-300 { border-color: rgb(75 85 99) !important; }
        [data-theme="dark"] .text-gray-900 { color: rgb(255 255 255) !important; }
        [data-theme="dark"] .text-gray-600 { color: rgb(156 163 175) !important; }
        [data-theme="dark"] .text-gray-700 { color: rgb(209 213 219) !important; }
        [data-theme="dark"] .hover\\:bg-gray-200:hover { background-color: rgb(75 85 99) !important; }
        [data-theme="dark"] .hover\\:border-gray-400:hover { border-color: rgb(107 114 128) !important; }
      `}),j&&e.jsx("div",{className:`
          fixed top-5 right-5 z-50 px-5 py-3 rounded-xl text-white font-medium text-sm
          shadow-2xl transition-all duration-300 ease-out
          ${j.type==="success"?"bg-green-500":j.type==="error"?"bg-red-500":"bg-blue-500"}
        `,children:j.message}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl border border-gray-200",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 mb-8",children:[e.jsxs("button",{className:`flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-lg text-sm font-medium transition-all duration-200 ease-out ${p==="encode"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-800"}`,onClick:()=>{a("encode"),k()},children:[e.jsx("span",{className:"text-lg",children:"📷"}),e.jsx("span",{children:"图片转Base64"})]}),e.jsxs("button",{className:`flex-1 flex items-center justify-center gap-2 py-3 px-6 rounded-lg text-sm font-medium transition-all duration-200 ease-out ${p==="decode"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-800"}`,onClick:()=>{a("decode"),k()},children:[e.jsx("span",{className:"text-lg",children:"🖼️"}),e.jsx("span",{children:"Base64转图片"})]})]}),e.jsxs("div",{children:[p==="encode"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"选择图片文件"}),e.jsxs("div",{className:`border-2 border-dashed rounded-xl p-10 text-center cursor-pointer transition-all duration-200 ease-out ${y?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:border-gray-400"}`,onDragOver:O,onDragLeave:S,onDrop:M,onClick:()=>B.current?.click(),children:[e.jsx("div",{className:"text-5xl mb-4",children:"📁"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"点击选择图片或拖拽到此处"}),e.jsx("p",{className:"text-sm text-gray-600",children:"支持 PNG、JPG、GIF、WebP 等格式，最大 10MB"})]}),e.jsx("input",{ref:B,type:"file",accept:"image/*",onChange:U,className:"hidden"})]})]}),s&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Base64 编码结果"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",onClick:A,children:[e.jsx("span",{children:"📋"})," 复制编码"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",onClick:F,children:[e.jsx("span",{children:"💾"})," 下载文件"]})]})]}),e.jsx("textarea",{className:"w-full h-48 p-4 bg-gray-50 border border-gray-300 rounded-xl text-sm font-mono text-gray-900 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",value:s,readOnly:!0,placeholder:"Base64编码将显示在这里..."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"输入Base64编码"}),e.jsx("textarea",{className:"w-full h-48 p-4 bg-gray-50 border border-gray-300 rounded-xl text-sm font-mono text-gray-900 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",value:t,onChange:r=>o(r.target.value),placeholder:"请粘贴Base64编码内容..."}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{className:`px-6 py-3 rounded-xl text-sm font-semibold transition-all duration-200 ${i||!t.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}`,onClick:z,disabled:i||!t.trim(),children:i?"转换中...":"转换为图片"}),e.jsx("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",onClick:()=>o(""),children:"清空内容"})]})]}),c&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"图片预览"}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",onClick:D,children:[e.jsx("span",{children:"⬇️"})," 下载图片"]})]}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 bg-gray-50 text-center",children:e.jsx("img",{src:c,alt:"转换后的图片",className:"max-w-full max-h-96 mx-auto rounded-lg shadow-lg"})})]})]}),(s||c)&&e.jsx("div",{className:"text-center pt-6 border-t border-gray-200 mt-6",children:e.jsxs("button",{className:"flex items-center gap-2 px-6 py-3 mx-auto border border-red-300 text-red-600 hover:bg-red-50 rounded-xl text-sm font-medium transition-colors",onClick:k,children:[e.jsx("span",{children:"🗑️"})," 清除所有结果"]})})]})]})]})}export{J as default};
